<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hasil Pemindaian</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .card { border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 20px; }
        h2 { color: #333; }
        li { margin-bottom: 5px; }

            /* ... (style lama Anda) ... */
    .score-container { text-align: center; margin-bottom: 30px; }
    .score-grade {
        display: inline-block;
        width: 120px;
        height: 120px;
        line-height: 120px;
        border-radius: 50%;
        color: white;
        font-size: 60px;
        font-weight: bold;
        border: 5px solid white;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .grade-a { background-color: #4CAF50; } /* Hijau */
    .grade-b { background-color: #8BC34A; } /* Hijau Muda */
    .grade-c { background-color: #FFC107; } /* Kuning */
    .grade-d { background-color: #FF9800; } /* Oranye */
    .grade-f { background-color: #f44336; } /* Merah */
    .score-number { font-size: 24px; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Hasil Pemindaian untuk: <code>{{ results.target }}</code></h1>

    <div class="card">
        <h2>‚úîÔ∏è Header Keamanan</h2>
        {% if results.security_headers.tidak_ditemukan %}
            <p><b>Ditemukan potensi masalah:</b> Header keamanan berikut tidak ditemukan.</p>
            <ul>
                {% for header, desc in results.security_headers.tidak_ditemukan.items() %}
                    <li><b>{{ header }}:</b> {{ desc }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Semua header keamanan dasar ditemukan. Bagus!</p>
        {% endif %}
    </div>

    <div class="card">
        <h2>üíª Informasi Teknologi</h2>
        <ul>
            {% for key, value in results.technology_info.items() %}
                <li><b>{{ key }}:</b> {{ value }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="card">
    <h2>ü§ñ Pengecekan robots.txt</h2>
    {% if results.robots_txt_info.ditemukan %}
        <p>File <code>robots.txt</code> ditemukan. Berikut adalah path yang terdaftar:</p>
        <pre style="background-color: #f4f4f4; padding: 10px; border-radius: 5px; white-space: pre-wrap;"><code>
{% for path in results.robots_txt_info.paths %}{{ path }}
{% endfor %}
        </code></pre>
    {% else %}
        <p>File <code>robots.txt</code> tidak ditemukan (Status: {{ results.robots_txt_info.status_code }}).</p>
    {% endif %}
</div>

<div class="score-container">
    {% set grade = results.score_info.grade %}
    <div class="score-grade grade-{{ grade|lower }}">{{ grade }}</div>
    <div class="score-number">Skor Keamanan: {{ results.score_info.score }} / 100</div>
</div>

<div class="card">
    <h2>üìù Ringkasan & Rekomendasi Perbaikan</h2>
    <table style="width:100%; text-align: left; border-collapse: collapse;">
        <tr style="background-color:#f2f2f2;">
            <th style="padding: 8px; border: 1px solid #ddd;">Temuan Keamanan</th>
            <th style="padding: 8px; border: 1px solid #ddd;">Langkah Perbaikan yang Direkomendasikan</th>
        </tr>
        {% for item in results.score_info.findings %}
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; vertical-align: top;">{{ item.finding }}</td>
            <td style="padding: 8px; border: 1px solid #ddd; vertical-align: top;">{{ item.recommendation }}</td>
        </tr>
        {% endfor %}
    </table>
</div>

<div class="card">
    <h2>üîë Pengecekan Direktori Sensitif</h2>
    {% if results.exposed_git_info.ditemukan %}
        <div style="background-color: #ffdddd; border-left: 5px solid #f44336; padding: 10px; margin-top: 10px;">
            <h3 style="color: #f44336;">RISIKO KRITIS DITEMUKAN!</h3>
            <p>Direktori <code>.git</code> terdeteksi (Status: {{ results.exposed_git_info.status_code }}). Ini sangat berbahaya karena bisa membocorkan seluruh kode sumber dan informasi sensitif lainnya. Segera hapus atau blokir akses ke direktori ini.</p>
        </div>
    {% else %}
        <p>Tidak ditemukan direktori <code>.git</code> yang terekspos. Bagus!</p>
    {% endif %}
</div>

<div class="card">
    <h2>üîó Pengecekan Mixed Content</h2>
    {% if results.mixed_content_info.ditemukan %}
        <div style="background-color: #fff3e0; border-left: 5px solid #ff9800; padding: 10px; margin-top: 10px;">
            <h3 style="color: #ff9800;">PERINGATAN DITEMUKAN!</h3>
            <p>Halaman ini memuat sumber daya melalui HTTP yang tidak aman. Ini bisa membahayakan keamanan halaman. Berikut adalah URL yang ditemukan:</p>
            <ul>
                {% for url in results.mixed_content_info.urls %}
                    <li><code>{{ url }}</code></li>
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <p>Tidak ditemukan adanya mixed content. Bagus!</p>
    {% endif %}
</div>
    
    <a href="/">Lakukan Pemindaian Lain</a>
</body>
</html>